<!doctype html>
<html lang="id" class="h-full">
 <head>
  <link rel="icon" type="image/png" href="Logo1.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perpustakaan Muara Literasi - SMAK 6 PENABUR Jakarta</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&amp;family=Source+Sans+Pro:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    .font-display {
      font-family: 'Playfair Display', serif;
    }
    
    .font-body {
      font-family: 'Source Sans Pro', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 50%, #1e3a5f 100%);
    }
    
    .card-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card-hover:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }
    
    .dewey-card {
      background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
      border-left: 4px solid;
    }
    
    .book-spine {
      writing-mode: vertical-rl;
      text-orientation: mixed;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .animate-fade-in {
      animation: fadeInUp 0.6s ease-out forwards;
    }
    
    .animate-float {
      animation: float 3s ease-in-out infinite;
    }
    
    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    
    .search-glow:focus {
      box-shadow: 0 0 0 3px rgba(45, 90, 135, 0.3);
    }
    
    .modal-overlay {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
    }
    
    .book-3d {
      perspective: 1000px;
    }
    
    .book-cover {
      transform-style: preserve-3d;
      transition: transform 0.4s ease;
    }
    
    .book-3d:hover .book-cover {
      transform: rotateY(-15deg);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-body bg-slate-50 text-slate-800 overflow-auto">
  <div id="app" class="w-full h-full"><!-- Header -->
   <header class="gradient-bg text-white relative overflow-hidden">
    <div class="absolute inset-0 opacity-10">
     <svg class="w-full h-full" viewbox="0 0 100 100" preserveaspectratio="none"><pattern id="books-pattern" x="0" y="0" width="20" height="20" patternunits="userSpaceOnUse">
       <rect x="2" y="5" width="3" height="12" fill="currentColor" rx="0.5" />
       <rect x="6" y="3" width="4" height="14" fill="currentColor" rx="0.5" />
       <rect x="11" y="6" width="3" height="11" fill="currentColor" rx="0.5" />
       <rect x="15" y="4" width="3" height="13" fill="currentColor" rx="0.5" />
      </pattern> <rect width="100%" height="100%" fill="url(#books-pattern)" />
     </svg>
    </div>
    <div class="relative z-10 max-w-7xl mx-auto px-4 py-8 md:py-12">
     <div class="flex flex-col md:flex-row items-center justify-between gap-6">
      <div class="text-center md:text-left">
       <div class="flex items-center justify-center md:justify-start gap-3 mb-2">
  <img src="logo-muara-literasi.png" 
     alt="Logo Muara Literasi" 
     class="w-16 h-16 object-contain drop-shadow-lg float">

        </div>
        <div>
         <h1 id="library-name" class="font-display text-3xl md:text-4xl font-bold tracking-tight">Muara Literasi</h1>
         <p id="school-name" class="text-amber-200 text-lg font-light">SMAK 6 PENABUR Jakarta</p>
        </div>
       </div>
       <p id="welcome-text" class="text-slate-200 mt-3 max-w-md text-sm md:text-base">Jendela ilmu pengetahuan untuk generasi cerdas dan berkarakter</p>
      </div><!-- Delta Asix Button --> <a href="https://drive.google.com/drive/u/1/folders/1ocEv063sobBZJbCr6sgFcHSfVC_P_kA8" target="_blank" rel="noopener noreferrer" class="group flex items-center gap-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white px-6 py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 card-hover">
       <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
        <svg class="w-7 h-7" fill="currentColor" viewbox="0 0 24 24"><path d="M7.71 3.5L1.15 15l3.43 6h13.69l3.44-6L15.14 3.5H7.71zm.58 1.5h6.42l5.14 9-2.57 4.5H5.72L3.15 14l5.14-9z" /> <path d="M12 8v4l3.5 2-1 1.73L10 13V8h2z" />
        </svg>
       </div>
       <div class="text-left"><span class="block font-bold text-lg">Delta Asix</span> <span class="block text-amber-100 text-sm">Koleksi Digital</span>
       </div>
       <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
       </svg></a>
     </div><!-- Search Bar -->
     <div class="mt-8 max-w-2xl mx-auto">
      <div class="relative"><input type="text" id="search-input" placeholder="Cari judul buku, penulis, atau kategori..." class="w-full px-6 py-4 pl-14 rounded-2xl bg-white/95 text-slate-800 placeholder-slate-400 shadow-xl search-glow focus:outline-none text-base">
       <svg class="absolute left-5 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
       </svg>
      </div>
     </div>
    </div>
   </header><!-- Main Content -->
   <main class="max-w-7xl mx-auto px-4 py-10"><!-- Stats Bar -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
     <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 text-center"><span id="total-books" class="block text-2xl font-bold text-blue-600">0</span> <span class="text-slate-500 text-sm">Total Buku</span>
     </div>
     <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 text-center"><span class="block text-2xl font-bold text-emerald-600">10</span> <span class="text-slate-500 text-sm">Kategori</span>
     </div>
     <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 text-center"><span id="ebook-count" class="block text-2xl font-bold text-amber-600">0</span> <span class="text-slate-500 text-sm">E-Book Tersedia</span>
     </div>
     <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 text-center"><span class="block text-2xl font-bold text-purple-600">âˆž</span> <span class="text-slate-500 text-sm">Akses 24/7</span>
     </div>
    </div><!-- Dewey Classification Section -->
    <section class="mb-12">
     <div class="flex items-center gap-3 mb-6">
      <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
       <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
       </svg>
      </div>
      <div>
       <h2 class="font-display text-2xl font-bold text-slate-800">Klasifikasi Dewey</h2>
       <p class="text-slate-500 text-sm">Jelajahi koleksi berdasarkan kategori</p>
      </div>
     </div>
     <div id="dewey-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4"><!-- Dewey cards will be inserted here -->
     </div>
    </section><!-- Book Collection Section -->
    <section id="books-section">
     <div class="flex items-center justify-between mb-6">
      <div class="flex items-center gap-3">
       <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center">
        <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
        </svg>
       </div>
       <div>
        <h2 class="font-display text-2xl font-bold text-slate-800">Koleksi Buku Digital</h2>
        <p class="text-slate-500 text-sm">Baca online kapan saja, di mana saja</p>
       </div>
      </div><span id="book-count" class="bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full text-sm font-medium">1 buku</span>
     </div>
     <div id="books-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"><!-- Book cards will be inserted here -->
     </div><!-- No Results Message -->
     <div id="no-results" class="hidden text-center py-16">
      <div class="w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
       <svg class="w-10 h-10 text-slate-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
       </svg>
      </div>
      <h3 class="font-display text-xl font-bold text-slate-700 mb-2">Buku tidak ditemukan</h3>
      <p class="text-slate-500">Coba kata kunci lain atau jelajahi kategori di atas</p>
     </div>
    </section>
   </main><!-- Footer -->
   <footer class="bg-slate-800 text-white mt-16">
    <div class="max-w-7xl mx-auto px-4 py-8">
     <div class="flex flex-col md:flex-row items-center justify-between gap-4">
      <div class="flex items-center gap-3">
       <div class="w-10 h-10 bg-slate-700 rounded-full flex items-center justify-center">
        <svg class="w-6 h-6 text-amber-400" fill="currentColor" viewbox="0 0 24 24"><path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z" />
        </svg>
       </div>
       <div><span class="font-display font-bold">Muara Literasi</span> <span class="block text-slate-400 text-sm">SMAK 6 PENABUR Jakarta</span>
       </div>
      </div>
      <p class="text-slate-400 text-sm text-center md:text-right">Â© 2024 Perpustakaan Muara Literasi. Membangun generasi literat.</p>
     </div>
    </div>
   </footer><!-- Book Detail Modal -->
   <div id="book-modal" class="fixed inset-0 z-50 hidden">
    <div class="modal-overlay absolute inset-0" onclick="closeModal()"></div>
    <div class="relative z-10 flex items-center justify-center min-h-full p-4">
     <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90%] overflow-auto animate-fade-in">
      <div id="modal-content" class="p-6"><!-- Modal content will be inserted here -->
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Default configuration
    const defaultConfig = {
      library_name: "Muara Literasi",
      school_name: "SMAK 6 PENABUR Jakarta",
      welcome_text: "Jendela ilmu pengetahuan untuk generasi cerdas dan berkarakter",
      primary_color: "#1e3a5f",
      secondary_color: "#f59e0b",
      text_color: "#1e293b",
      background_color: "#f8fafc",
      accent_color: "#10b981"
    };
    
    // Dewey Classification Data
    const deweyCategories = [
      { code: "000", name: "Karya Umum", color: "#6366f1", icon: "ðŸŒ", desc: "Ensiklopedia, Komputer, Informasi" },
      { code: "100", name: "Filsafat & Psikologi", color: "#8b5cf6", icon: "ðŸ§ ", desc: "Etika, Logika, Metafisika" },
      { code: "200", name: "Agama", color: "#ec4899", icon: "ðŸ•Šï¸", desc: "Teologi, Spiritualitas" },
      { code: "300", name: "Ilmu Sosial", color: "#f43f5e", icon: "ðŸ‘¥", desc: "Politik, Ekonomi, Hukum" },
      { code: "400", name: "Bahasa", color: "#f97316", icon: "ðŸ’¬", desc: "Linguistik, Kamus, Tata Bahasa" },
      { code: "500", name: "Sains Murni", color: "#eab308", icon: "ðŸ”¬", desc: "Matematika, Fisika, Biologi" },
      { code: "600", name: "Teknologi", color: "#22c55e", icon: "âš™ï¸", desc: "Kedokteran, Teknik, Pertanian" },
      { code: "700", name: "Seni & Rekreasi", color: "#14b8a6", icon: "ðŸŽ¨", desc: "Musik, Olahraga, Arsitektur" },
      { code: "800", name: "Sastra", color: "#0ea5e9", icon: "ðŸ“š", desc: "Puisi, Drama, Prosa" },
      { code: "900", name: "Sejarah & Geografi", color: "#6366f1", icon: "ï¿½ï¿½ï¿½ï¸", desc: "Biografi, Sejarah Dunia" }
    ];
    
    // Book Collection Data (will be loaded from JSON)
    let books = [];
    let filteredBooks = [];
    let selectedCategory = null;
    
    // Load books from JSON file
    async function loadBooks() {
      try {
        const response = await fetch('data_buku.json');
        if (!response.ok) {
          throw new Error('Gagal memuat data buku');
        }
        const data = await response.json();
        
        // Transform JSON data to match our format
        books = data.map((book, index) => {
          const category = book.Klasifikasi || "000";
          const categoryData = deweyCategories.find(c => c.code === category);
          
          // Generate tags from title and author
          const tags = [];
          if (book.Judul) {
            const titleWords = book.Judul.split(' ').filter(w => w.length > 4);
            tags.push(...titleWords.slice(0, 2));
          }
          if (categoryData) {
            tags.push(categoryData.name);
          }
          
          return {
            id: index + 1,
            title: book.Judul || "Tanpa Judul",
            author: book.Pengarang || "Anonim",
            category: category,
            categoryName: categoryData ? categoryData.name : "Karya Umum",
            year: book.Tahun || "-",
            description: book.Deskripsi || "Buku digital tersedia untuk dibaca online.",
            cover: getCoverIcon(category),
            link: book.Link || "#",
            language: book.Bahasa || "Indonesia",
            pages: book.Halaman || "-",
            tags: tags.slice(0, 4)
          };
        });
        
        filteredBooks = [...books];
        return true;
      } catch (error) {
        console.error('Error loading books:', error);
        // Fallback to sample data
        books = [
          {
            id: 1,
            title: "Letters of a Javanese Princess",
            author: "Raden Ajeng Kartini",
            category: "800",
            categoryName: "Sastra",
            year: "1911",
            description: "Kumpulan surat-surat R.A. Kartini yang mengungkapkan pemikiran dan perjuangannya untuk emansipasi wanita Indonesia.",
            cover: "ðŸ“–",
            link: "https://online.fliphtml5.com/PerpustakaanSMAK6PENABUR/wjik/#p=1",
            language: "Inggris",
            pages: "200+",
            tags: ["Feminisme", "Sejarah", "Indonesia", "Epistolari"]
          }
        ];
        filteredBooks = [...books];
        return false;
      }
    }
    
    // Get cover icon based on category
    function getCoverIcon(category) {
      const icons = {
        "000": "ðŸ’»", "100": "ðŸ§ ", "200": "ðŸ•Šï¸", "300": "ðŸ‘¥", "400": "ðŸ’¬",
        "500": "ðŸ”¬", "600": "âš™ï¸", "700": "ðŸŽ¨", "800": "ðŸ“–", "900": "ðŸ—ºï¸"
      };
      return icons[category] || "ðŸ“š";
    }
    
    // Update stats display
    function updateStats() {
      const totalBooks = books.length;
      document.getElementById('total-books').textContent = totalBooks;
      document.getElementById('ebook-count').textContent = totalBooks;
    }
    
    // Initialize Dewey Grid
    function initDeweyGrid() {
      const grid = document.getElementById('dewey-grid');
      grid.innerHTML = deweyCategories.map((cat, index) => `
        <button onclick="filterByCategory('${cat.code}')" 
                data-code="${cat.code}"
                class="dewey-card rounded-xl p-4 text-left card-hover shadow-sm hover:shadow-md animate-fade-in"
                style="border-left-color: ${cat.color}; animation-delay: ${index * 0.05}s; opacity: 0;">
          <div class="flex items-start gap-3">
            <span class="text-2xl">${cat.icon}</span>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1">
                <span class="text-xs font-bold px-2 py-0.5 rounded" style="background: ${cat.color}20; color: ${cat.color}">${cat.code}</span>
              </div>
              <h3 class="font-bold text-slate-800 text-sm leading-tight">${cat.name}</h3>
              <p class="text-slate-500 text-xs mt-1 line-clamp-1">${cat.desc}</p>
            </div>
          </div>
          <div class="mt-2 text-right">
            <span class="text-xs text-slate-400">${books.filter(b => b.category === cat.code).length} buku</span>
          </div>
        </button>
      `).join('');
    }
    
    // Initialize Books Grid
    function renderBooks(booksToRender) {
      const grid = document.getElementById('books-grid');
      const noResults = document.getElementById('no-results');
      const bookCount = document.getElementById('book-count');
      
      if (booksToRender.length === 0) {
        grid.innerHTML = '';
        noResults.classList.remove('hidden');
        bookCount.textContent = '0 buku';
        return;
      }
      
      noResults.classList.add('hidden');
      bookCount.textContent = `${booksToRender.length} buku`;
      
      grid.innerHTML = booksToRender.map((book, index) => {
        const category = deweyCategories.find(c => c.code === book.category);
        return `
          <div class="book-3d animate-fade-in" style="animation-delay: ${index * 0.1}s; opacity: 0;">
            <div class="bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden card-hover h-full flex flex-col">
              <!-- Book Cover -->
              <div class="relative h-48 flex items-center justify-center" style="background: linear-gradient(135deg, ${category?.color}20 0%, ${category?.color}40 100%);">
                <div class="book-cover w-28 h-36 bg-white rounded-r-lg shadow-lg flex items-center justify-center relative overflow-hidden">
                  <div class="absolute left-0 top-0 bottom-0 w-3" style="background: ${category?.color}"></div>
                  <span class="text-5xl ml-2">${book.cover}</span>
                </div>
                <div class="absolute top-3 right-3">
                  <span class="px-2 py-1 rounded-lg text-xs font-bold text-white" style="background: ${category?.color}">${book.category}</span>
                </div>
              </div>
              
              <!-- Book Info -->
              <div class="p-4 flex-1 flex flex-col">
                <h3 class="font-display font-bold text-slate-800 text-lg leading-tight mb-1 line-clamp-2">${book.title}</h3>
                <p class="text-slate-500 text-sm mb-3">${book.author}</p>
                
                <div class="flex flex-wrap gap-1 mb-3">
                  ${book.tags.slice(0, 3).map(tag => `
                    <span class="px-2 py-0.5 bg-slate-100 text-slate-600 rounded text-xs">${tag}</span>
                  `).join('')}
                </div>
                
                <div class="mt-auto flex items-center gap-2">
                  <button onclick="openBookModal(${book.id})" 
                          class="flex-1 bg-slate-100 hover:bg-slate-200 text-slate-700 py-2.5 px-4 rounded-xl text-sm font-medium transition-colors">
                    Detail
                  </button>
                  <a href="${book.link}" 
                     target="_blank" 
                     rel="noopener noreferrer"
                     class="flex-1 text-white py-2.5 px-4 rounded-xl text-sm font-medium transition-all hover:opacity-90 text-center flex items-center justify-center gap-1"
                     style="background: ${category?.color}">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                    Baca
                  </a>
                </div>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }
    
    // Filter by category
    function filterByCategory(code) {
      const buttons = document.querySelectorAll('[data-code]');
      
      if (selectedCategory === code) {
        selectedCategory = null;
        filteredBooks = [...books];
        buttons.forEach(btn => btn.classList.remove('ring-2', 'ring-offset-2'));
      } else {
        selectedCategory = code;
        filteredBooks = books.filter(book => book.category === code);
        buttons.forEach(btn => {
          if (btn.dataset.code === code) {
            btn.classList.add('ring-2', 'ring-offset-2');
            btn.style.setProperty('--tw-ring-color', deweyCategories.find(c => c.code === code)?.color);
          } else {
            btn.classList.remove('ring-2', 'ring-offset-2');
          }
        });
      }
      
      document.getElementById('search-input').value = '';
      renderBooks(filteredBooks);
      
      document.getElementById('books-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    // Search functionality
    function handleSearch(query) {
      const searchTerm = query.toLowerCase().trim();
      
      if (!searchTerm) {
        filteredBooks = selectedCategory 
          ? books.filter(book => book.category === selectedCategory)
          : [...books];
      } else {
        const baseBooks = selectedCategory 
          ? books.filter(book => book.category === selectedCategory)
          : books;
          
        filteredBooks = baseBooks.filter(book => 
          book.title.toLowerCase().includes(searchTerm) ||
          book.author.toLowerCase().includes(searchTerm) ||
          book.categoryName.toLowerCase().includes(searchTerm) ||
          book.tags.some(tag => tag.toLowerCase().includes(searchTerm)) ||
          book.description.toLowerCase().includes(searchTerm)
        );
      }
      
      renderBooks(filteredBooks);
    }
    
    // Open book modal
    function openBookModal(bookId) {
      const book = books.find(b => b.id === bookId);
      if (!book) return;
      
      const category = deweyCategories.find(c => c.code === book.category);
      const modal = document.getElementById('book-modal');
      const content = document.getElementById('modal-content');
      
      content.innerHTML = `
        <div class="flex justify-between items-start mb-4">
          <span class="px-3 py-1 rounded-lg text-sm font-bold text-white" style="background: ${category?.color}">
            ${category?.icon} ${book.category} - ${book.categoryName}
          </span>
          <button onclick="closeModal()" class="w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition-colors">
            <svg class="w-5 h-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
        
        <div class="flex gap-6 mb-6">
          <div class="w-32 h-44 rounded-lg shadow-lg flex items-center justify-center flex-shrink-0 relative overflow-hidden" style="background: linear-gradient(135deg, ${category?.color}30 0%, ${category?.color}50 100%);">
            <div class="absolute left-0 top-0 bottom-0 w-2" style="background: ${category?.color}"></div>
            <span class="text-6xl">${book.cover}</span>
          </div>
          <div class="flex-1">
            <h2 class="font-display text-2xl font-bold text-slate-800 mb-2">${book.title}</h2>
            <p class="text-slate-600 text-lg mb-3">${book.author}</p>
            <div class="grid grid-cols-2 gap-2 text-sm">
              <div class="bg-slate-50 rounded-lg p-2">
                <span class="text-slate-400 block text-xs">Tahun</span>
                <span class="font-medium">${book.year}</span>
              </div>
              <div class="bg-slate-50 rounded-lg p-2">
                <span class="text-slate-400 block text-xs">Bahasa</span>
                <span class="font-medium">${book.language}</span>
              </div>
              <div class="bg-slate-50 rounded-lg p-2">
                <span class="text-slate-400 block text-xs">Halaman</span>
                <span class="font-medium">${book.pages}</span>
              </div>
              <div class="bg-slate-50 rounded-lg p-2">
                <span class="text-slate-400 block text-xs">Format</span>
                <span class="font-medium">Digital</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mb-6">
          <h3 class="font-bold text-slate-700 mb-2">Sinopsis</h3>
          <p class="text-slate-600 leading-relaxed">${book.description}</p>
        </div>
        
        <div class="mb-6">
          <h3 class="font-bold text-slate-700 mb-2">Tags</h3>
          <div class="flex flex-wrap gap-2">
            ${book.tags.map(tag => `
              <span class="px-3 py-1 rounded-full text-sm" style="background: ${category?.color}15; color: ${category?.color}">${tag}</span>
            `).join('')}
          </div>
        </div>
        
        <a href="${book.link}" 
           target="_blank" 
           rel="noopener noreferrer"
           class="block w-full text-white py-4 px-6 rounded-xl text-center font-bold text-lg transition-all hover:opacity-90 hover:shadow-lg"
           style="background: linear-gradient(135deg, ${category?.color} 0%, ${category?.color}dd 100%);">
          ðŸ“– Baca Buku Sekarang
        </a>
      `;
      
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    // Close modal
    function closeModal() {
      const modal = document.getElementById('book-modal');
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
    
    // Close modal on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });
    
    // Element SDK Configuration
    async function onConfigChange(config) {
      document.getElementById('library-name').textContent = config.library_name || defaultConfig.library_name;
      document.getElementById('school-name').textContent = config.school_name || defaultConfig.school_name;
      document.getElementById('welcome-text').textContent = config.welcome_text || defaultConfig.welcome_text;
    }
    
    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }
    
    function mapToEditPanelValues(config) {
      return new Map([
        ["library_name", config.library_name || defaultConfig.library_name],
        ["school_name", config.school_name || defaultConfig.school_name],
        ["welcome_text", config.welcome_text || defaultConfig.welcome_text]
      ]);
    }
    
    // Initialize
    async function init() {
      // Initialize Element SDK
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues
        });
      }
      
      // Load books from JSON file
      await loadBooks();
      
      // Update stats
      updateStats();
      
      // Initialize UI
      initDeweyGrid();
      renderBooks(books);
      
      // Setup search
      const searchInput = document.getElementById('search-input');
      let debounceTimer;
      searchInput.addEventListener('input', (e) => {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(() => handleSearch(e.target.value), 300);
      });
    }
    
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c4f3903e487ea7d',t:'MTc2OTU5MDAyMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
